<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="Skripsi">
        <meta name="keywords" content="Rapidminer, Python, Machine Learning, Scikit" />
        <meta name="author" content="Sabri Sangjaya">
        <title>Grafik Percobaan KNN</title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script src="js/jquery.min.js" type="text/javascript"></script>
        <script src="js/popper.min.js" type="text/javascript"></script>
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <script src="js/chart.js"></script>
        <script src="js/data.js"></script>
        <link rel="stylesheet" href="css/font-awesome.css">
        <link rel="stylesheet" type="text/css" href="datatable/datatables.min.css"/>
        <script type="text/javascript" src="datatable/datatables.min.js"></script>
    </head>
    <body>
        <br/><br/>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            
                            <div class="form-row">
                                <div class="form-group col-md-3">
                                    <label for="jenisknn">Jenis KNN</label>
                                    <select class="form-control" id="jenisknn" name="jenisknn">
                                        <option value="1">KNN</option>
                                        <option value="2">Weighted Distance KNN</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="jenissampling">Sampling</label>
                                    <select class="form-control" id="jenissampling" name="jenissampling">
                                        <option value="1">Tanpa Resampling</option>
                                        <option value="2">SMOTE</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="jenisnormalisasi">Normalisasi</label>
                                    <select class="form-control" id="jenisnormalisasi" name="jenisnormalisasi">
                                        <option value="1">Tanpa Normalisasi</option>
                                        <option value="2">MinMax Normalization</option>
                                        <option value="3">Standard Scaler</option>
                                    </select>
                                </div>
                                <div class="form-group col-md-3">
                                    <label for="jenisjarak">Jarak</label>
                                    <select class="form-control" id="jenisjarak" name="jenisjarak">
                                        <option value="1">Euclidean</option>
                                        <option value="2">Manhattan</option>
                                        <option value="3">Minkowski</option>
                                        <option value="4">Chebyshev</option>
                                    </select>
                                </div>
                            </div>
                            <button onclick="displayTabel()" class="btn btn-primary">Submit</button>
                            <br/><br/>
                            <canvas id="charthasil"></canvas>
                            <br/><br/>
                            <div id="hasilpencarian">
                                
                            </div>
                            <script>
                            labelsisi=[];
                            dataakurasi=[];
                            datafmeasure=[];
                            const ctx = document.getElementById('charthasil').getContext('2d');
                            
                            var chart = new Chart(ctx, {
                            
                            // The type of chart we want to create
                            type: 'line',
                            // The data for our dataset
                            data: {
                            labels: labelsisi,
                            datasets: [
                            {
                            label: 'F-Measure',
                            borderColor: 'rgb(255, 99, 50)',
                            backgroundColor: 'rgb(255, 99, 50)',
                            fill: false,
                            data: datafmeasure
                            },
                            {
                            label: 'Akurasi',
                            borderColor: 'rgb(50, 99, 255)',
                            backgroundColor:'rgb(50, 99, 255)',
                            fill: false,
                            data: dataakurasi
                            }]
                            },
                            // Configuration options go here
                            options: {
                            title: {
                            display: true,
                            text: 'Performa Klasifikasi'
                            },
                            scales: {
                            yAxes: [{
                            scaleLabel: {
                            display: true,
                            labelString: 'Nilai'
                            },
                            ticks: {
                            max: 1,
                            min: 0,
                            stepSize: 0.05
                            }
                            }],
                            xAxes: [{
                            scaleLabel: {
                            display: true,
                            labelString: 'Nilai K'
                            }
                            }]
                            }
                            }
                            });
                            function displayTabel() {
                            if($('#jenisknn').val()==="1"){
                            var jenisknn="KNN";
                            }
                            else if($('#jenisknn').val()==="2"){
                            var jenisknn="WDKNN";
                            }
                            if($('#jenissampling').val()==="1"){
                            var jenissampling="asli";
                            }
                            else if($('#jenissampling').val()==="2"){
                            var jenissampling="smote";
                            }
                            if($('#jenisnormalisasi').val()==="1"){
                            var jenisnormalisasi="Data Asli";
                            }
                            else if($('#jenisnormalisasi').val()==="2"){
                            var jenisnormalisasi="MinMaxScaler";
                            }
                            else if($('#jenisnormalisasi').val()==="3"){
                            var jenisnormalisasi="StandardScaler";
                            }
                            if($('#jenisjarak').val()==="1"){
                            var jenisjarak="euclidean";
                            }
                            else if($('#jenisjarak').val()==="2"){
                            var jenisjarak="manhattan";
                            }
                            else if($('#jenisjarak').val()==="3"){
                            var jenisjarak="minkowski";
                            }
                            else if($('#jenisjarak').val()==="4"){
                            var jenisjarak="chebyshev";
                            }
                            var correct = [];
                            for(var i=0;i<Object.keys(datahasil).length;i++){
                            if(datahasil[i]["KNN"]===jenisknn&&datahasil[i]["Jarak"]===jenisjarak&&datahasil[i]["Normalisasi"]===jenisnormalisasi&&datahasil[i]["Sampling"]===jenissampling){
                            correct.push(datahasil[i]);
                            }
                            }
                            console.log(correct);
                            
                            var hasil='<table class="table table-bordered table-sm table-fixed  table-responsive" id="tabelhasil">';
                                hasil+='<thead><th>KNN</th><th>Sampling</th><th>Normalisasi</th><th>Jarak</th><th>Nilai K</th><th>Time Train</th><th>Score Time</th><th>Akurasi</th><th>Presisi</th><th>Recall</th><th>F1 Score</th><th>True SD Pred SD</th><th>True SD Pred SMP</th><th>True SD Pred SMA</th><th>True SMP Pred SD</th><th>True SMP Pred SMP</th><th>True SMP Pred SMA</th><th>True SMA Pred SD</th><th>True SMA Pred SMP</th><th>True SMA Pred SMA</th></thead>';
                                labelsisi.length = 0;
                                dataakurasi.length = 0;;
                                datafmeasure.length = 0;;
                                for(i in correct){
                                hasil+='<tr>';
                                    labelsisi.push(correct[i]["Nilai K"]);
                                    dataakurasi.push(correct[i]["Akurasi"]);
                                    datafmeasure.push(correct[i]["F1 Score"]);
                                    for(j in correct[i]){
                                    hasil+='<td>'+correct[i][j]+'</td>';
                                    }
                                hasil+='</tr>';
                                }
                            hasil+='</table>';
                            $('#hasilpencarian').html(hasil);
                            $('#tabelhasil').DataTable();
                            
                            chart.update();
                            
                            
                            }
                            </script>
                            
                            <script>
                            
                            </script>
                        </div>
                    </div>
                    <br/>
                    <br/>
                </div>
            </div>
        </div>
    </body>
</html>